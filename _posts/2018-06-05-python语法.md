---
layout:     post
title:      Python语法
category: blog
description: more writing more money
---
# Python语法

## 特殊字符

* 井号(#) 表示之后的字符为Python注释
* 换行(\n) 是标准的行分割符（通常一个语句一行）
* 反斜线(\\) 继续上一行     *建议采用闭合符号替代*
* 分号(;) 将两个语句连接在一行中    *不提倡*
* 冒号(:) 将代码块的头和体分开
* 语句(代码块) 用缩进块的方式体现
* 不同的缩进深度分割不同的代码块
* Python文件以及模块的形式组织

**模块**：每个Python脚本都是可以被当成模块，模块变得过大，并且驱动太多功能的话，就应该考虑拆一些代码出来构建另一个模块。

## 变量赋值

* 等号(=)是主要的赋值操作符 （其他的都是增量赋值操作符）

> *注：*
>
> Python赋值是引用传递
>
> Python赋值语句不会返回值  在C语言中成立

~~~python
x = 1
y = (x = x + 1) # 赋值语句不是合法表达式
y = x = x + 1 # 链式赋值
x += 1 # 增量赋值
x = y = z = 1 # 多重赋值
(x,y,z) = (1,2,'a string') # mul-tuple "多元"赋值
~~~

> 增量赋值相对普通赋值不仅仅是写法的改变，可变对象会被就地修改，不可变对象会重新分配一个对象
>
> 多重赋值 上例中一个1的整型对象被创建，该对象的同一个引用被赋值给x,y,z。也就是一个对象赋给了多个变量。
>
> 多个变量同时赋值，等号两边都是元组，此处括号建议加上

~~~python
# Python中交换值
(x,y) = (1,2)
(x,y) = (y,x)
~~~

* 标识符

> 作为名字的有效字符集合  关键字  保留字
>
> 合法的Python标识符   同C语言



* 专用下划线标识符

> _xxx 不用 'from module import *' 导入
>
> \__xxx\__ 系统定义名字
>
> _xxx 类中私有变量   注意这点

## 基本风格指南

* 注释  简洁、优雅、准确
* 文档  \__doc__   obj.\__doc__ 访问第一个没有赋值的字符串   用的很少
* 缩进  注意tab和空格保持其中一种一致  建议使用空格 不同编辑器tab可能不一致

> 小技巧：通过先使用tab后统一将tab转为空格

~~~python
import this

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren't special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you're Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it's a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let's do more of those!

~~~

> Python之禅

* Python模块结构和布局

~~~python
# !/usr/bin/python  --> 无需直接调用解释器，输入脚本名字即可执行
# -*- coding: utf-8 -*-   --> module.__doc__ 访问
# __author__:  Rewrite

# (1) 起始行 ⬆

#（2）模块文档
'''this is a templete module'''

# (3) 模块导入
import sys
import os

# (4) (全局)变量定义
debug = True           # 除非必须  尽量使用局部变量代替全局变量 易维护节约内存

# (5) 类定义(若有)
class FooClass(object):
    "Foo Class"   # class.__doc__ 模块被导入时
    pass

# (6) 函数定义(若有)
def test():
    "test function"  # function.__doc__
    foo = FooClass()
    if debug:
        print("ran test()")
    pass
# (7) 主程序
if __name__ == "__main__":  
    test() # 通常调用main函数

~~~

> 所有的模块都有能力执行代码，那些没有代码缩进的代码行，在模块被导入时就会执行，除了那些真正需要执行的代码以外，几乎所有的功能代码都在函数当中。
>
> 通常只有主程序模块中有大量的顶级可执行代码，所有其他被导入模块应该只有很少的顶级执行代码，所有的功能代码都应该封装在函数或类当中
>
> \__name__ 指示模块如何被加载
>
> * 如果模块是被导入 \_\_name__ 的值是模块的名字
> * 如果模块是直接被执行的 \_\_name__的值是 '____main__'
> * 单元测试

## 内存管理

* 变量无须事先声明
* 变量无须指定类型
* 开发者不用关心内存管理
* 变量名会被回收
* del语句能够直接释放资源

1. 变量定义

~~~ python
x = 4
print(x)
~~~

2. 动态类型

> 解释器根据语法和右侧的操作数决定新对象的类型

3. 引用计数
4. del语句

~~~python
del obj1[,obj2[,...bojN]]
~~~

## Python程序

~~~python
# coding=utf-8
# !/usr/bin/python

'makeTextFile.py -- create text file'

import os

ls = os.linesep # 本地变量别名

fname = raw_input("\nplease input filename\n")

all = []
print("\nEnter lines ('.' by itself to quit).\n")

while True:
    entry = raw_input(">")
    if entry == '.':
        break
    else:
        all.append(entry)

fobj = open(fname,'w')
fobj.writelines(['%s%s' % (x, ls) for x in all])
fobj.close()
print('DONE')
~~~

~~~python
# !/usr/bin/python
# -*- coding: utf-8 -*-
# __author__:  Rewrite


'readTextFile.py -- read and display text file'

fname = raw_input('Enter filename:')
print()

# try-except-else用法
try:
    fobj = open(fname,'r')
except IOError, e:
    # 文件不存在已经包含在该异常内
    # TODO 如何做文件名打印 file:%s
    print("*** file open error:", e)
else: # 此处else用法
    for eachLine in fobj:
        print(eachLine)
    fobj.close()
~~~

## 相关模块和开发工具

调试器：pdb

记录器：logging

性能测试器：profile、hotshot、cProfile

> 补充：性能测试工具 skyworking类似   待做Demo

### Github相关链接
[Python学习文件][1]


-----------
[1]:https://github.com/youzhanghao/python